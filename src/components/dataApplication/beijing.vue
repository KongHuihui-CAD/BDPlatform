<template>
  <div>
    <div class="url">
      <el-input style="width:400px" placeholder="请输入接口地址名称" v-model="url"></el-input>
      <el-button type="primary" @click="yes()" plain>确定</el-button>
    </div>
    <div id="map-wrap" style="height:700px;">
      <!-- 这里以后是地图 -->
    </div>
  </div>
</template>
<script>
import echarts from "echarts";
import '../../../static/js/echarts.js'
import '../../../static/js/beijing.js'
import axios from "axios";
import qs from "qs";
export default {
  data() {
    return {

      data: [
        {
          "name": "和平里街道",
          "value": [
            116.4303455017625,
            39.96249446905228,
            2081
          ]
        },
        {
          "name": "旧宫镇",
          "value": [
            116.44330580450772,
            39.81830616603872,
            113
          ]
        },
        {
          "name": "良乡镇",
          "value": [
            116.15960185253238,
            39.74162134058663,
            113
          ]
        },
        {
          "name": "黄村镇",
          "value": [
            116.34696683605613,
            39.74853714104026,
            39
          ]
        },
        {
          "name": "万寿路街道",
          "value": [
            116.26965661213765,
            39.91238402526398,
            31
          ]
        },
        {
          "name": "泉河街道",
          "value": [
            116.64036641679058,
            40.32777119191771,
            31
          ]
        },
        {
          "name": "长辛店街道",
          "value": [
            116.21656408673398,
            39.83217619190106,
            30
          ]
        },
        {
          "name": "八里庄街道",
          "value": [
            116.485512,
            39.921064,
            18
          ]
        },
        {
          "name": "朝外街道",
          "value": [
            116.454519032392,
            39.92622140699155,
            17
          ]
        },
        {
          "name": "天宫院街道",
          "value": [
            116.33420964198334,
            39.70766654877197,
            16
          ]
        },
        {
          "name": "西红门镇",
          "value": [
            116.35707611114667,
            39.79599589976869,
            14
          ]
        },
        {
          "name": "十渡镇",
          "value": [
            115.59594262328847,
            39.6464359886692,
            14
          ]
        },
        {
          "name": "安贞街道",
          "value": [
            116.40747006212035,
            39.97439250147732,
            13
          ]
        },
        {
          "name": "林校路街道",
          "value": [
            116.33843142006656,
            39.72976699751833,
            12
          ]
        },
        {
          "name": "燕山地区",
          "value": [
            115.98005,
            39.726358,
            12
          ]
        },
        {
          "name": "拱辰街道",
          "value": [
            116.14997292116077,
            39.73749053077516,
            12
          ]
        },
        {
          "name": "德胜街道",
          "value": [
            116.39564503787867,
            39.92998577808024,
            12
          ]
        },
        {
          "name": "兴丰街道",
          "value": [
            116.34859700543798,
            39.73767072601292,
            11
          ]
        },
        {
          "name": "新镇街道",
          "value": [
            116.06749475372813,
            39.74002879657789,
            10
          ]
        },
        {
          "name": "清源街道",
          "value": [
            116.34511770650283,
            39.75758861118614,
            10
          ]
        },
        {
          "name": "回龙观街道",
          "value": [
            116.32898394820457,
            40.07252312620129,
            10
          ]
        },
        {
          "name": "中关村街道",
          "value": [
            116.32476855348031,
            39.98379003717076,
            9
          ]
        },
        {
          "name": "周口店镇",
          "value": [
            115.95847560113852,
            39.68664837278359,
            9
          ]
        },
        {
          "name": "城关街道",
          "value": [
            116.02217184066339,
            39.70916776991047,
            9
          ]
        },
        {
          "name": "安定门街道",
          "value": [
            116.41900142040949,
            39.95046113360532,
            9
          ]
        },
        {
          "name": "长阳镇",
          "value": [
            116.22375114525477,
            39.7709099104739,
            9
          ]
        },
        {
          "name": "大安山乡",
          "value": [
            115.79268108075783,
            39.89429517723118,
            8
          ]
        },
        {
          "name": "北臧村镇",
          "value": [
            116.46741246168182,
            39.83962693028375,
            8
          ]
        },
        {
          "name": "张坊镇",
          "value": [
            115.72376621532193,
            39.58270556566146,
            8
          ]
        },
        {
          "name": "北太平庄街道",
          "value": [
            116.36861257091277,
            39.95666230032744,
            8
          ]
        },
        {
          "name": "观音寺街道",
          "value": [
            116.35287125534263,
            39.7477964431765,
            8
          ]
        },
        {
          "name": "佛子庄乡",
          "value": [
            115.89703056911999,
            39.82676459969875,
            7
          ]
        },
        {
          "name": "南窖乡",
          "value": [
            115.84908326908413,
            39.77438217880312,
            7
          ]
        },
        {
          "name": "河北镇",
          "value": [
            115.94516712775392,
            39.82593765177421,
            7
          ]
        },
        {
          "name": "安定镇",
          "value": [
            116.50605790158565,
            39.62390362363643,
            6
          ]
        },
        {
          "name": "长沟镇",
          "value": [
            115.90719017716654,
            39.58625035880903,
            6
          ]
        },
        {
          "name": "青龙湖镇",
          "value": [
            116.04612334430642,
            39.78364908719605,
            6
          ]
        },
        {
          "name": "榆垡镇",
          "value": [
            116.32230369029656,
            39.51983292072141,
            5
          ]
        },
        {
          "name": "西长安街街道",
          "value": [
            116.38992279045806,
            39.91074738030027,
            5
          ]
        },
        {
          "name": "城北街道",
          "value": [
            116.2703997569301,
            40.22838492642382,
            5
          ]
        },
        {
          "name": "紫竹院街道",
          "value": [
            116.31843819455148,
            39.95037324002238,
            5
          ]
        },
        {
          "name": "史家营乡",
          "value": [
            115.67725985032409,
            39.86551352583749,
            5
          ]
        },
        {
          "name": "阎村镇",
          "value": [
            116.09929633003632,
            39.72140557818887,
            5
          ]
        },
        {
          "name": "西潞街道",
          "value": [
            116.12302026504622,
            39.72839390944758,
            4
          ]
        },
        {
          "name": "大栅栏街道",
          "value": [
            116.39956057193557,
            39.89919729252902,
            4
          ]
        },
        {
          "name": "北下关街道",
          "value": [
            116.34180168806873,
            39.96118056777034,
            4
          ]
        },
        {
          "name": "霞云岭乡",
          "value": [
            115.75390940826883,
            39.73492085841561,
            4
          ]
        },
        {
          "name": "东直门街道",
          "value": [
            116.44829420280128,
            39.93653907090478,
            3
          ]
        },
        {
          "name": "大兴区",
          "value": [
            116.42519459737913,
            39.65279011836446,
            3
          ]
        },
        {
          "name": "琉璃河镇",
          "value": [
            116.17107926038919,
            39.60051611318855,
            3
          ]
        },
        {
          "name": "海淀街道",
          "value": [
            116.31904904229826,
            39.98414662276277,
            3
          ]
        },
        {
          "name": "瀛海镇",
          "value": [
            116.45245549527958,
            39.76258517841261,
            3
          ]
        },
        {
          "name": "大屯街道",
          "value": [
            116.41831180115084,
            40.00493867566119,
            3
          ]
        },
        {
          "name": "交道口街道",
          "value": [
            116.40734228624632,
            39.94210262051509,
            3
          ]
        },
        {
          "name": "大石窝镇",
          "value": [
            115.83275532228714,
            39.55888315498789,
            3
          ]
        },
        {
          "name": "礼贤镇",
          "value": [
            116.44189830350246,
            39.56284800772882,
            3
          ]
        },
        {
          "name": "青云店镇",
          "value": [
            116.508242480874,
            39.69165673382363,
            3
          ]
        },
        {
          "name": "石楼镇",
          "value": [
            115.99151937406863,
            39.66128499937197,
            3
          ]
        },
        {
          "name": "丰台街道",
          "value": [
            116.29327688089508,
            39.85551855047992,
            3
          ]
        },
        {
          "name": "长辛店镇",
          "value": [
            116.21602283610487,
            39.84690400058139,
            3
          ]
        },
        {
          "name": "庞各庄镇",
          "value": [
            116.33049740793794,
            39.64068418694001,
            3
          ]
        },
        {
          "name": "什刹海街道",
          "value": [
            116.38821498502251,
            39.93969399053087,
            2
          ]
        },
        {
          "name": "亦庄镇",
          "value": [
            116.48844430892584,
            39.80601481906696,
            2
          ]
        },
        {
          "name": "采育镇",
          "value": [
            116.67290507882058,
            39.65856778047479,
            2
          ]
        },
        {
          "name": "甘家口街道",
          "value": [
            116.32768741398066,
            39.9263233688483,
            2
          ]
        },
        {
          "name": "东花市街道",
          "value": [
            116.43798738673588,
            39.90522919111997,
            2
          ]
        },
        {
          "name": "景山街道",
          "value": [
            116.41694817338669,
            39.93326101351961,
            2
          ]
        },
        {
          "name": "长子营镇",
          "value": [
            116.60253149818568,
            39.69081940060531,
            2
          ]
        },
        {
          "name": "韩村河镇",
          "value": [
            115.96950800641179,
            39.60941337674474,
            2
          ]
        },
        {
          "name": "龙山街道",
          "value": [
            116.6434884587261,
            40.32230058309955,
            2
          ]
        },
        {
          "name": "豆各庄乡",
          "value": [
            116.57119037351919,
            39.86487247033337,
            2
          ]
        },
        {
          "name": "宋庄镇",
          "value": [
            116.73400959016942,
            39.94672907770381,
            2
          ]
        },
        {
          "name": "来广营乡",
          "value": [
            116.44015499793147,
            40.03799506535476,
            2
          ]
        },
        {
          "name": "西城区",
          "value": [
            116.37319010401802,
            39.93428014370851,
            2
          ]
        },
        {
          "name": "苹果园街道",
          "value": [
            116.2013755120187,
            39.9360936418008,
            2
          ]
        },
        {
          "name": "东城区",
          "value": [
            116.42188470126446,
            39.93857401298612,
            2
          ]
        },
        {
          "name": "城南街道",
          "value": [
            116.26122195009407,
            40.21868972864652,
            2
          ]
        },
        {
          "name": "三里屯街道",
          "value": [
            116.45449401997337,
            39.94283352181226,
            2
          ]
        },
        {
          "name": "怀柔镇",
          "value": [
            116.59340835643431,
            40.63813934031092,
            2
          ]
        },
        {
          "name": "通州区",
          "value": [
            116.74007918067626,
            39.80981488385131,
            2
          ]
        },
        {
          "name": "丰台区",
          "value": [
            116.2583703354677,
            39.84193785220474,
            1
          ]
        },
        {
          "name": "清河街道",
          "value": [
            116.34072605255956,
            40.04128869983379,
            1
          ]
        },
        {
          "name": "大红门街道",
          "value": [
            116.41387866345909,
            39.84514510657681,
            1
          ]
        },
        {
          "name": "建外街道",
          "value": [
            116.48395880002286,
            39.91243756952946,
            1
          ]
        },
        {
          "name": "八宝山街道",
          "value": [
            116.24287817878353,
            39.90729334142984,
            1
          ]
        },
        {
          "name": "井庄镇",
          "value": [
            116.09985264884203,
            40.47745001246342,
            1
          ]
        },
        {
          "name": "九渡河镇",
          "value": [
            116.46662696358118,
            40.36659615670377,
            1
          ]
        },
        {
          "name": "魏善庄镇",
          "value": [
            116.42391598158336,
            39.64024944423812,
            1
          ]
        },
        {
          "name": "白纸坊街道",
          "value": [
            116.36784267458223,
            39.88680452378819,
            1
          ]
        },
        {
          "name": "呼家楼街道",
          "value": [
            116.47339382712339,
            39.92803860803846,
            1
          ]
        },
        {
          "name": "天通苑北街道",
          "value": [
            116.4498487186897,
            40.07573613008619,
            1
          ]
        },
        {
          "name": "蒲洼乡",
          "value": [
            115.54218754546947,
            39.74010653155543,
            1
          ]
        },
        {
          "name": "八角街道",
          "value": [
            116.20277862300495,
            39.92163718489109,
            1
          ]
        },
        {
          "name": "南邵镇",
          "value": [
            116.29244295694099,
            40.21421417059046,
            1
          ]
        },
        {
          "name": "东华门街道",
          "value": [
            116.41369487374497,
            39.9223291372698,
            1
          ]
        },
        {
          "name": "学院路街道",
          "value": [
            116.35862561359201,
            39.99929417302052,
            1
          ]
        },
        {
          "name": "建国门街道",
          "value": [
            116.43415880955067,
            39.9201179325581,
            1
          ]
        },
        {
          "name": "窦店镇",
          "value": [
            116.07453578190861,
            39.65773848840517,
            1
          ]
        },
        {
          "name": "马驹桥镇",
          "value": [
            116.5674833271881,
            39.75485762289035,
            1
          ]
        },
        {
          "name": "五里坨街道",
          "value": [
            116.132641399126,
            39.9620855010557,
            1
          ]
        },
        {
          "name": "东四街道",
          "value": [
            116.43047934928347,
            39.93675959657538,
            1
          ]
        },
        {
          "name": "北房镇",
          "value": [
            116.70934598896896,
            40.332075627877,
            1
          ]
        },
        {
          "name": "果园街道",
          "value": [
            116.84527461343234,
            40.3846652306953,
            1
          ]
        },
        {
          "name": "上地街道",
          "value": [
            116.30119252537094,
            40.04849754007553,
            1
          ]
        },
        {
          "name": "卢沟桥乡",
          "value": [
            116.2231270780441,
            39.85551106891932,
            1
          ]
        },
        {
          "name": "花乡地区",
          "value": [
            116.33695586433417,
            39.83813278733096,
            1
          ]
        },
        {
          "name": "长哨营满族乡",
          "value": [
            116.75732524981657,
            40.80025950256842,
            1
          ]
        },
        {
          "name": "苏家坨镇",
          "value": [
            116.18952943329246,
            40.08826450674169,
            1
          ]
        },
        {
          "name": "八里庄街道",
          "value": [
            116.3079,
            39.933283,
            1
          ]
        },
        {
          "name": "奥运村街道",
          "value": [
            116.4194616322036,
            40.03282642888987,
            1
          ]
        },
        {
          "name": "望京街道",
          "value": [
            116.49498832982019,
            39.99909032995289,
            1
          ]
        },
        {
          "name": "团结湖街道",
          "value": [
            116.4733665204325,
            39.93761696389646,
            1
          ]
        },
        {
          "name": "左家庄街道",
          "value": [
            116.45765918326829,
            39.95530992982154,
            1
          ]
        },
        {
          "name": "永顺镇",
          "value": [
            116.66208312137573,
            39.92416334997205,
            1
          ]
        },
        {
          "name": "大台街道",
          "value": [
            115.94493713639082,
            39.96920712040583,
            1
          ]
        },
        {
          "name": "小关街道",
          "value": [
            116.42784637990152,
            39.9932988345276,
            1
          ]
        },
        {
          "name": "南苑街道",
          "value": [
            116.39330297575304,
            39.81118134271917,
            1
          ]
        },
        {
          "name": "永定门外街道",
          "value": [
            116.40840708459781,
            39.87204158807106,
            1
          ]
        },
        {
          "name": "东小口镇",
          "value": [
            116.41478413565044,
            40.06461007166444,
            1
          ]
        },
        {
          "name": "鼓楼街道",
          "value": [
            116.8719192531638,
            40.39086608894944,
            1
          ]
        },
        {
          "name": "梨园镇",
          "value": [
            116.6697071031203,
            39.87266792299496,
            1
          ]
        },
        {
          "name": "和平街街道",
          "value": [
            116.42335488828385,
            39.97274532094769,
            1
          ]
        },
        {
          "name": "西罗园街道",
          "value": [
            116.3900115843645,
            39.86974760793751,
            1
          ]
        },
        {
          "name": "老山街道",
          "value": [
            116.22883581315322,
            39.91620050501972,
            1
          ]
        },
        {
          "name": "北新桥街道",
          "value": [
            116.4305442069413,
            39.94812725991497,
            1
          ]
        }
      ],
      url: '',
      num: 0,
      table: [],
    }
  },
  mounted() {
    this.init();

  },
  methods: {
    init() {
      var mapChart = echarts.init(document.getElementById('map-wrap'));
      var data = this.data;
      var self = this;
      var option = {
        geo: {
          map: 'beijing',
          label: {
            show:true,
            emphasis: {
              show: true
            }
          },
          itemStyle: {
            normal: {
                areaColor: '#FBF7F2',
                borderColor: '#CAB881'
            },
            emphasis: {
                areaColor: '#CAB883'
            }
        },
        layoutCenter:['50%','50%'],
        layoutSize:700,
        },
        visualMap:
          {
            type: "piecewise",
            pieces: [
              { gt: self.data[0].value[2], color: '#E07C77', label: self.data[0].name }, // 不指定 max，表示 max 为无限大（Infinity）。
              { value: self.data[1].value[2], color: '#EFAB87', label: self.data[1].name },
              { value: self.data[2].value[2], color: '#F3C075', label: self.data[2].name },
              { value: self.data[3].value[2], color: '#F6F457', label: self.data[3].name },
              { value: self.data[4].value[2], color: '#BBE04B', label: self.data[4].name },
              { value: self.data[5].value[2], color: '#60CFBA', label: self.data[5].name },
              { value: self.data[6].value[2], color: '#80BFC6', label: self.data[6].name },
              { value: self.data[7].value[2], color: '#5B8BB2', label: self.data[7].name },
              { value: self.data[8].value[2], color: '#2553D5', label: self.data[8].name },
              { value: self.data[9].value[2], color: '#8794DC', label: self.data[9].name },
              { value: self.data[10].value[2], color: '#0D0D08', label: self.data[10].name },
              { lt: self.data[10].value[2], color: '#9CBEEF', label: '其他' }     // 不指定 min，表示 min 为无限大（-Infinity）。
            ],
          },
        series: [
          {
            name: '', // series名称
            type: 'scatter', // series图表类型
            coordinateSystem: 'geo',// series坐标系类型
            data: data, // series数据内容
            symbolSize: 7,
            zoom: 2.2,
          }
        ]
      }
      mapChart.setOption(option, true);
    },
    yes() {
      console.log(this.url);
      var self = this;
      axios
        .post(
          this.url
        ).then((response) => {
          var data = response;
          self.data = data;
          console.log(data);
        });
    }
  }
}
</script>
<style scoped>
.url {
  padding-left: 25%;
  padding-top: 20px;
}
</style>
